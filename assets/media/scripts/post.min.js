var tocId="#toc";var flagId="#tocFlag";var post={getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},tocScroll:function(event){var Obj=$(flagId);if(Obj.length!==1){return false}var tocFixed=$(tocId);var ObjTop=Obj.offset().top-$(window).height()*.5;var scrollTop=post.getScrollTop();var postHeaderHeight=$("#postHeader").height();if(scrollTop>postHeaderHeight){tocFixed.show()}else{tocFixed.hide()}var tocEle=document.querySelector(tocId);if(!tocEle||!tocEle.getBoundingClientRect()){return}var tocHeight=tocEle.getBoundingClientRect().height;if(scrollTop>ObjTop-tocHeight*.5){tocFixed.addClass("right-fixed")}else{tocFixed.removeClass("right-fixed")}post.tocParentActive();event.preventDefault()},scrollTocFixed:function(){window.addEventListener("scroll",post.tocScroll,false)},initToc:function(){var headerEl="h1,h2,h3,h4,h5,h6",content=".post-content";tocbot.init({tocSelector:"#toc",contentSelector:content,headingSelector:headerEl,scrollSmooth:true,headingsOffset:0-$("#postHeader").height(),hasInnerContainers:false});var tocLinks=$(".toc-link");if(tocLinks){for(var i=0;i<tocLinks.length;i++){var tocLink=tocLinks[i];tocLink.after(document.createElement("span"))}}},readProgress:function(){var $content=$("#main");var $readProgressBar=$("#readProgress .read-progress-bar");var changeReadProgress=function(){var contentHeight=$content.height()-window.innerHeight;if(contentHeight<=0)return;var readHeight=window.pageYOffset-$content.offset().top;var progressWidth=readHeight/contentHeight*100+"%";$readProgressBar.width(progressWidth)};displayReadProgress&&changeReadProgress();$(window).on("scroll",function(){displayReadProgress&&changeReadProgress()})},tocHover:function(){$(".toc-list-item span").hover(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")},function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})},tocParentActive:function(){var isCollapsible=$(".is-active-li").parents("ol.toc-list.is-collapsible");if(isCollapsible){isCollapsible.each(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")})}var isCollapsed=$("ol.toc-list.is-collapsible.is-collapsed");if(isCollapsed){isCollapsed.each(function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})}},shareIcon:function(){var $config={sites:["google","twitter","facebook","weibo","qq","tencent","qzone","linkedin","wechat","douban","diandian"],disabled:socialDisabled.split(",")};socialShare(".social-share",$config)}};$(function(){post.initToc();post.scrollTocFixed();post.readProgress();post.tocHover()});